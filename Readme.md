## 屏幕截图工具的使用

#### 如何将 ScreenshotTool.java 程序打包成可执行的 JAR 文件，并创建批处理文件来方便运行。以下是具体步骤：
位置：(src/main/java/com/tyler/screenshot/ScreenshotTool.java)

## 1. 打包 Java 程序为可执行 JAR 文件
   首先需要确保你的 Java 项目已经正确配置了 Main 类和清单文件（Manifest）。

### 1.1 创建清单文件（Manifest）
   在项目根目录下创建一个名为manifest.mf的文件，内容如下：

```plaintext
Main-Class: com.tyler.screenshot.ScreenshotTool

```
**注意：文件末尾需要有一个空行，这是 JAR 规范要求的。**

### 1.2 使用命令行打包 JAR 文件
打开终端，进入项目根目录，执行以下命令：

```bash
# 进入ScreenshotTool.java的根目录，编译Java文件
javac -encoding UTF-8 -d bin *.java

# 创建JAR文件
jar cfm ScreenshotTool.jar manifest.mf -C bin .
```

### 2. 创建批处理文件（.bat）
批处理文件可以方便地启动 Java 程序，创建一个名为screenshot.bat的文件，内容如下：

```batch
@echo off
java -jar "C:\路径\到\你的\ScreenshotTool.jar"
pause
```

将上面的路径替换为你实际存放 JAR 文件的路径。如果你想双击后窗口自动关闭，可以去掉pause命令。

### 3. 自定义快捷方式图标（可选）
如果你想为快捷方式设置自定义图标，可以按照以下步骤操作：

右键点击快捷方式，选择 "属性"
在 "快捷方式" 选项卡中，点击 "更改图标" 按钮
浏览到包含图标的文件（.ico 格式），选择后点击 "确定"


# 功能

1. 截图功能
   区域选择截图：通过覆盖层选择屏幕任意区域进行截图，支持多显示器环境下的跨屏幕截图。
   快捷键触发：可通过 F1 键、Ctrl+Alt+Q 组合键或界面按钮快速启动截图。
   尺寸显示：截图选择时实时显示所选区域的宽度和高度。
2. 编辑功能
   基础绘图工具：
   矩形、圆形、直线、箭头等图形绘制，支持颜色和线条粗细调整。
   文字添加功能，可自定义字体颜色和大小。
   橡皮擦工具：支持不同大小的橡皮擦，用于擦除绘制的图形。
   撤销操作：通过 Ctrl+Z 快捷键或撤销按钮回退编辑步骤，最多支持 100 次撤销。
   实时预览：编辑内容实时显示在截图上，便于调整。
3. 图片处理功能
   保存截图：将编辑后的图片保存为 PNG 格式文件。
   复制到剪贴板：将截图复制到系统剪贴板，方便粘贴到其他应用。
   钉在桌面：将截图以窗口形式固定在桌面，支持始终置顶显示。
4. 钉图窗口功能
   交互操作：
   拖动窗口位置、双击标题栏最大化 / 还原。
   鼠标滚轮缩放图片，支持 0.25 倍到 5 倍缩放。
   编辑功能：在钉图上直接进行图形绘制、文字添加和擦除操作。
   透明度与置顶：窗口背景透明，且始终显示在其他窗口上方。
5. 界面与交互优化
   系统托盘集成：程序可最小化到系统托盘，托盘图标支持快捷操作（截图、查看钉图、退出）。
   多显示器支持：自动识别并支持捕获多个显示器的组合区域。
   快捷键支持：除截图快捷键外，编辑界面支持 Ctrl+Z 撤销等常用快捷键。
   用户友好提示：操作反馈（如保存成功、复制到剪贴板）通过对话框提示。
6. 技术实现细节
   图形处理：使用 Java 2D API 绘制图形，支持抗锯齿和线条样式调整。
   历史记录：通过栈结构实现编辑步骤的撤销功能。
   坐标转换：在钉图和编辑界面中处理缩放时的坐标映射，确保操作精准。


----

## 屏幕绘图工具的使用

#### 如何将 ScreenDrawer.java 程序打包成可执行的 JAR 文件，并创建批处理文件来方便运行

位置：(src/main/java/com/tyler/screendrawer/ScreenDrawer.java)

打成JAR文件的方式可以参考 屏幕截图 工具的步骤。

### 屏幕绘图工具功能总结

屏幕绘图工具，允许用户在屏幕上绘制图形和添加文本，具有系统托盘集成、全局热键支持等功能。以下是详细的功能说明：

1. 基本绘图功能
   矩形绘制\
   通过鼠标拖动在屏幕上绘制红色矩形框\
   矩形边框宽度为 3 像素，边角为圆角\
   绘制时实时显示预览，释放鼠标后确认绘制\
   文本添加\
   支持添加蓝色文本，使用 "Microsoft YaHei" 字体（24 号粗体）\
   文本具有抗锯齿效果，显示更平滑\
   可输入包括中文在内的可打印字符


2. 交互模式与操作\
   绘图模式切换\
   通过Ctrl+Alt+Shift+A快捷键(该快捷键目前无效)或系统托盘菜单激活绘图模式\
   激活后显示半透明覆盖整个屏幕的绘图窗口\
   按ESC键或通过托盘菜单退出绘图模式\
   矩形 / 文本模式切换\
   按Ctrl+Alt+A快捷键切换绘制模式\
   矩形模式：默认模式，使用十字光标绘制矩形\
   文本模式：使用文本光标，点击屏幕设置文本位置并输入内容\
   输入完成后按Enter键确认文本，按Backspace键删除字符


3. 系统托盘集成\
   托盘图标\
   显示 16x16 像素的红色矩形图标，带有白色边框\
   双击托盘图标可激活绘图模式\
   托盘菜单\
   Activate Drawing：激活绘图模式\
   Undo Last Object：撤销最后绘制的对象\
   Clear All Objects：清除所有绘制的对象\
   Exit Drawing Mode：退出绘图模式\
   Exit Program：退出程序\
   消息通知\
   操作完成后通过托盘显示提示消息（如 "New rectangle added"）\
   模式切换时显示模式说明（如 "Text mode activated"）


4. 全局热键支持\
   绘图模式激活：Ctrl+Alt+Shift+A(该快捷键目前无效，可以双击底部托盘达到激活绘图模式的效果)\
   文本模式切换：Ctrl+Alt+A\
   撤销操作：Ctrl+Z（删除最后一个对象）\
   清除所有对象：Ctrl+X\
   退出绘图模式：ESC


5. 高级功能\
   焦点管理\
   绘图窗口失去焦点时自动尝试重新获取焦点\
   通过forceFocus标志增强焦点保持能力\
   多屏幕支持\
   窗口自动覆盖所有屏幕的组合区域，适配多显示器环境\
   抗锯齿处理\
   矩形边框和文本均启用抗锯齿，提升显示效果\
   文本特别设置TEXT_ANTIALIAS_ON渲染提示\
   状态管理\
   记录鼠标起始点、当前绘制对象等状态\
   支持修饰键（Ctrl/Alt/Shift）状态跟踪


6. 辅助功能\
   撤销与清除\
   支持撤销最后一个绘制的对象（矩形或文本）\
   支持一键清除所有绘制内容\
   输入控制\
   文本输入时显示光标，支持中文输入法\
   输入验证：忽略控制字符，仅接受可打印字符\
   可视化反馈\
   绘制过程中实时刷新界面，显示当前操作预览\
   通过控制台输出操作日志（如 "Rectangle added"）


7. 技术实现细节\
   窗口透明度\
   使用半透明窗口（透明度 5%），不完全遮挡底层内容\
   自动检测系统是否支持窗口透明，不支持时使用白色背景\
   光标管理\
   矩形模式：十字光标（CROSSHAIR_CURSOR）\
   文本模式：文本光标（TEXT_CURSOR）\
   非绘图模式：默认光标\
   事件监听\
   鼠标事件：按下、释放、拖动\
   键盘事件：按键按下、释放、字符输入\
   全局事件监听：捕获系统级热键操作


### 总结
   该工具通过 Swing 和 AWT 实现了轻量级的屏幕绘图功能，结合系统托盘和全局热键，使用户可以在不切换窗口的情况下直接在屏幕上标记内容。适用于屏幕标注、临时笔记等场景，操作便捷且功能完整。